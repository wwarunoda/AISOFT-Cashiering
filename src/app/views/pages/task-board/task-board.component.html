<br />
<div class="container">
  <div class="row">
    <div class="col-md-12">
      <button class="btn btn-sm btn-default pull-right" (click)="resetTask()">
        Reset
      </button>
      <button class="btn btn-sm btn-primary pull-right" (click)="saveTask()">
        Save
      </button>
    </div>
  </div>
  <div class="row m-auto">
    <div class="col-12">
      <ng-container
        *ngFor="let container of kanbanContainers"
        [ngTemplateOutlet]="kanbanContainer"
        [ngTemplateOutletContext]="{ item: container }"
      ></ng-container>
    </div>
  </div>
</div>

<ng-template #kanbanContainer let-item="item">
  <div class="example-container">
    <div class="d-flex flex-row bd-highlight3" style="width: 300px;">
      <div class="bd-highlight">
        <h4>{{ item?.title }}</h4>
      </div>
      <div class="bd-highlight ml-auto">
        <span class="badge badge-secondary">{{ item?.item?.length }}</span>
      </div>
    </div>
    <div
      cdkDropList
      [id]="item?.id"
      [cdkDropListData]="item?.item"
      [cdkDropListConnectedTo]="item.connectedTo"
      class="example-list"
      (cdkDropListDropped)="drop($event)"
    >
      <div
        class="card example-box"
        cdkDrag
        (click)="onSelect(item)"
        *ngFor="let item of item?.item"
      >
        <ng-container
          [ngTemplateOutlet]="cardContainer"
          [ngTemplateOutletContext]="{ item: item }"
        ></ng-container>
      </div>
    </div>
  </div>
</ng-template>

<!-- Card Container -->

<ng-template #cardContainer let-item="item">
  <div class="card-body">
    <div class="d-flex flex-row bd-highlight3">
      <div class="bd-highlight">
        <h6 class="card-subtitle mb-2 text-muted">{{ item.receiptNumber }}</h6>
      </div>
    </div>
    <div class="row">
      <div class="col-6">
        <section class="text-dark" style="font-size: 11px;">
          Amount:
          <span style="color: gray;">{{ item.totalAmount }}</span>
        </section>
      </div>
      <div class="col-6">
        <section class="text-dark" style="font-size: 11px;">
          User:
          <span style="color: gray;">{{ item.userName }}</span>
        </section>
      </div>
    </div>
    <div class="row">
      <div class="col-12">
        <section class="text-dark" style="font-size: 11px;">
          Email:
          <span style="color: gray;">{{ item.userEmail }}</span>
        </section>
      </div>
      <div class="col-12">
        <section class="text-dark" style="font-size: 11px;">
          Phone:
          <span style="color: gray;">{{ item.userPhoneNumber }}</span>
        </section>
      </div>
    </div>
    <div class="row">
      <div class="col-12">
        <section class="text-dark" style="font-size: 11px;">
          Address:
          <span style="color: gray;">{{ item.shippingDetails.unitNumber }}</span>,
          <span style="color: gray;">{{ item.shippingDetails.street }}</span>,
          <span style="color: gray;">{{ item.shippingDetails.surburb }}</span>,
          <span style="color: gray;">{{ item.shippingDetails.state.name }}</span>
        </section>
      </div>
    </div>
    <div class="row">
      <div class="col-6">
        <section class="text-dark" style="font-size: 11px;">
          Created:
          <span style="color: gray;">{{ item.createdDate | date: 'dd/MM/yyyy' }}</span>
        </section>
      </div>
      <div class="col-6">
        <section class="text-dark" style="font-size: 11px;">
          Updated:
          <span style="color: gray;">{{ item.lastUpdatedDate | date: 'dd/MM/yyyy' }}</span>
        </section>
      </div>
    </div>
    <div class="row border" *ngFor="let products of item.receiptProducts">
      <div class="col-12">
        <section class="text-dark" style="font-size: 11px;">
          P-Key:
          <span style="color: gray;">{{ products.productKey }}</span>
        </section>
      </div>
      <div class="col-6">
        <section class="text-dark" style="font-size: 11px;">
          P-Name:
          <span style="color: gray;">{{ products.productName }}</span>
        </section>
      </div>
      <div class="col-6">
        <section class="text-dark" style="font-size: 11px;">
          Price:
          <span style="color: gray;">{{ products.productPrice }}</span>
        </section>
      </div>
      <div class="col-6">
        <section class="text-dark" style="font-size: 11px;">
          Colour:
          <span style="color: gray;">{{ products.productColour }}</span>
        </section>
      </div>
      <div class="col-6">
        <section class="text-dark" style="font-size: 11px;">
          C-Code:
          <span style="color: gray;">{{ products.productColourCode }}</span>
        </section>
      </div>
      <div class="col-6">
        <section class="text-dark" style="font-size: 11px;">
          Size:
          <span style="color: gray;">{{ products.sizeData }}</span>
        </section>
      </div>
      <div class="col-6">
        <section class="text-dark" style="font-size: 11px;">
          Quantity:
          <span style="color: gray;">{{ products.productQuantity }}</span>
        </section>
      </div>
    </div>
  </div>
</ng-template>
